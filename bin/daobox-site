#!/usr/bin/env node
"use strict";

var os = require("os");
var path = require("path");

// console.log('args', process.argv.slice(2))

function pkgAndSubpathForCurrentPlatform() {
  let pkg;
  let binName;
  let platformKey = `${process.platform} ${os.arch()}`;
  switch (process.platform) {
    case "win32":
      binName = "daobox-site.exe";
      break;
    case "darwin":
      binName = "daobox-site.bin";
      break;
    case "linux":
      binName = "daobox-site.bin";
      break;
    default:
      throw new Error(`Unsupported platform: ${platformKey}`);
  }
  return { pkg, binName };
}

const binPath = path.join(__dirname, pkgAndSubpathForCurrentPlatform().binName);
require("child_process").execFileSync(binPath, process.argv.slice(2), {
  stdio: "inherit",
});
